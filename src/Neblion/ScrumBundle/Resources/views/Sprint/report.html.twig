{% extends 'NeblionScrumBundle:Layout:base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/neblionscrum/js/jqplot/jquery.jqplot.css') }}" />
{% endblock stylesheets %}

{% block body %}
{% include 'NeblionScrumBundle:Layout:breadcrumb.html.twig' with {'pathes': pathes} %}
    
<div class="page-header">
    <h1>{{ 'Sprint reports:'|trans }}</h1>
</div>

<div class="row-fluid">
    <div class="span3">
        <p>{{ 'Sprint infos'|trans  }} {{ project.name }}</p>
    </div><!--/span-->
    
    
    <div class="span9">
        <h2>{{ 'Reports'|trans }}</h2>
        
        <!--
        <p>Inline Sparkline: <span class="inlinesparkline">1,4,4,7,5,9,10</span>.</p>
        <p>Sparkline with dynamic data: <span class="dynamicsparkline">Loading..</span></p>
        <p>Bar chart with dynamic data: <span class="dynamicbar">Loading..</span></p>
        <p>Bar chart with inline data: <span class="inlinebar">1,3,4,5,3,5</span></p>
        -->
        
        <div id="chartdiv" style="height:400px;width:600px; "></div>
    </div><!--/span-->
</div><!--/row-->

{% endblock body %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/neblionscrum/js/jquery.sparkline.min.js') }}"></script>
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="{{ asset('bundles/neblionscrum/js/jqplot/excanvas.js') }}"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="{{ asset('bundles/neblionscrum/js/jqplot/jquery.jqplot.min.js') }}"></script>
    <script language="javascript" type="text/javascript" src="{{ asset('bundles/neblionscrum/js/jqplot/plugins/jqplot.dateAxisRenderer.min.js') }}"></script>
    <script language="javascript" type="text/javascript" src="{{ asset('bundles/neblionscrum/js/jqplot/plugins/jqplot.highlighter.min.js') }}"></script>
    <script type="text/javascript">
    $(function() {
        /** This code runs when everything has been loaded on the page */
        /* Inline sparklines take their values from the contents of the tag */
        //$('.inlinesparkline').sparkline(); 

        /* Sparklines can also take their values from the first argument 
        passed to the sparkline() function */
        //var myvalues = [10,8,5,7,4,4,1];
        //$('.dynamicsparkline').sparkline(myvalues);
        
        /* The second argument gives options such as chart type */
        //$('.dynamicbar').sparkline(myvalues, {type: 'bar', barColor: 'green'} );

        /* Use 'html' instead of an array of values to pass options 
        to a sparkline with data in the tag */
        //$('.inlinebar').sparkline('html', {type: 'bar', barColor: 'red'} );
        
        var burndown_hours  = [{{ strHours|raw }}];
        var burndown_ideal  = [['{{ sprint.start|date('Y-m-d') }}',{{ estimateInitialHours }}],['{{ sprint.end|date('Y-m-d') }}',0]];
        $.jqplot('chartdiv', [burndown_ideal, burndown_hours], {
            title:'Burndown hours chart',
            //seriesColors: [ "#cccccc", "#eeeeee"],
            //series: [ { label: 'toto' }, { label: 'titi' } ],
            axes:{
                xaxis:{
                    min: "{{ sprint.start|date_modify("-1 day")|date("Y-m-d") }}",
                    max: "{{ sprint.end|date_modify("+1 day")|date("Y-m-d") }}",
                    renderer:$.jqplot.DateAxisRenderer,
                    tickOptions:{formatString:'%Y-%m-%d'},
                },
                yaxis: {
                    min: 0,
                    ticks: {{ strTickY|raw }},
                }
            },
            highlighter: {
                show: true,
                sizeAdjust: 7.5
            },
        });
    });
    
    </script>
{% endblock javascripts %}